{"version":3,"file":"/js/game.js","mappings":"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","sources":["webpack://lucky-puffin/./resources/js/game.js"],"sourcesContent":["/**\n * Lucky Puffin — game.js (Laravel Mix / Webpack)\n *\n * THE FIX: app.js and game.js are separate Webpack bundles.\n * window.Echo is created in app.js but game.js may run before it finishes.\n *\n * Solution: wait for 'echo:ready' custom event dispatched by app.js,\n * with a 100ms polling fallback in case scripts load out of order.\n */\n\n// ── State ─────────────────────────────────────────────────────────────────────\nlet playerId        = null;\nlet playerBalance   = 0;\nlet playerName      = null;\n\nlet currentRound    = null;\nlet currentBets     = { player: 0, banker: 0, tie: 0, playerPair: 0, bankerPair: 0, randomPair: 0 };\nlet selectedChip    = 0;\nlet hasBetThisRound = false;\nlet dealingShown    = false;\n\n// Client-side countdown — fires immediately when betting starts, even on shared\n// hosting where the queue worker (ProcessRoundTimer) may not be running yet.\n// Server TimerTick WS events correct it whenever they do arrive.\nlet localCountdownTimer     = null;\nlet localCountdownRemaining = 0;\n\nconst API_BASE = '/api/v1';\n\n// ── Entry point ───────────────────────────────────────────────────────────────\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    readPlayerData();\n\n    if (window.echoReady && window.Echo) {\n        // app.js already finished — boot immediately\n        boot();\n    } else {\n        // Wait for app.js to signal Echo is ready\n        document.addEventListener('echo:ready', boot, { once: true });\n\n        // Fallback polling: check every 100ms, give up after 5s\n        let attempts = 0;\n        const poll = setInterval(() => {\n            if (window.Echo) {\n                clearInterval(poll);\n                document.removeEventListener('echo:ready', boot);\n                boot();\n            } else if (++attempts > 50) {\n                clearInterval(poll);\n                console.error('[Game] Echo not available after 5s — check app.js loaded before game.js');\n                setTimerLabel('WebSocket error — please refresh');\n            }\n        }, 100);\n    }\n});\n\nfunction readPlayerData() {\n    const app = document.getElementById('game-app');\n    if (!app) return;\n    playerId      = parseInt(app.dataset.playerId)  || null;\n    playerName    = app.dataset.playerName           || 'Guest';\n    playerBalance = parseInt(app.dataset.balance)    || 0;\n    updateBalanceDisplay();\n}\n\nfunction boot() {\n    console.log('[Game] Echo ready — subscribing to channels');\n    subscribeToGameTable();\n    subscribeToPlayerChannel();\n    fetchInitialState();\n}\n\n// ── WebSocket: Public channel ─────────────────────────────────────────────────\n\nfunction subscribeToGameTable() {\n    window.Echo.channel('game-table')\n\n        .listen('.round.started', (data) => {\n            console.log('[WS] round.started', data);\n            // REST API stores round as {id:…}, WS events use {round_id:…} — normalise before comparing\n            const myId       = currentRound ? (currentRound.id || currentRound.round_id) : null;\n            const isNewRound = !currentRound || myId !== data.round_id;\n            currentRound     = data;\n            dealingShown     = false;\n\n            if (isNewRound) {\n                stopLocalCountdown();\n                clearBets();\n                hideOverlays();\n            }\n\n            if (data.status === 'betting') {\n                enableBetting();\n                startLocalCountdown(data.timer_seconds);\n            } else {\n                setTimerLabel('Waiting for first bet...');\n                enableBetting();\n            }\n        })\n\n        .listen('.timer.tick', (data) => {\n            // Sync local counter with authoritative server value\n            localCountdownRemaining = data.seconds_remaining;\n            updateTimerDisplay(data.seconds_remaining);\n        })\n\n        .listen('.bet.placed', (data) => {\n            addActivityItem('\\uD83C\\uDFB2 ' + data.player_name + ' bet ' + data.total_bet + ' WPUFF');\n            setPlayerCount(data.active_players);\n        })\n\n        .listen('.cards.dealt', (data) => {\n            console.log('[WS] cards.dealt', data);\n            if (dealingShown) return;\n            dealingShown = true;\n            currentRound = Object.assign({}, currentRound, data);\n            disableBetting();\n            setTimerLabel('Dealing cards...');\n            showSharedCards(data);\n\n            if (!hasBetThisRound) {\n                const pLen   = (data.player_cards || data.playerCards || []).length;\n                const bLen   = (data.banker_cards || data.bankerCards || []).length;\n                const waitMs = (Math.max(pLen, bLen) * 1000) + 1500 + 2000;\n                setTimeout(hideOverlays, waitMs);\n            }\n        })\n\n        .listen('.round.finished', (data) => {\n            console.log('[WS] round.finished', data);\n            showNextRoundCountdown(data.next_round_in);\n        });\n}\n\n// ── WebSocket: Private player channel ────────────────────────────────────────\n\nfunction subscribeToPlayerChannel() {\n    if (!playerId) return;\n\n    window.Echo.private('player.' + playerId)\n        .listen('.round.result', (data) => {\n            console.log('[WS] round.result', data);\n            playerBalance = data.new_balance;\n            updateBalanceDisplay();\n\n            const pLen   = (currentRound && currentRound.player_cards) ? currentRound.player_cards.length : 3;\n            const bLen   = (currentRound && currentRound.banker_cards) ? currentRound.banker_cards.length : 3;\n            const animMs = (Math.max(pLen, bLen) * 1000) + 1500;\n            setTimeout(function () { showResult(data); }, animMs);\n        });\n}\n\n// ── REST: Initial page load ───────────────────────────────────────────────────\n\nasync function fetchInitialState() {\n    try {\n        const res   = await window.axios.get(API_BASE + '/game/state');\n        const data  = res.data;\n        const round = data.current_round;\n\n        // Sync authoritative server balance — fixes balance showing 1000 after refresh\n        if (data.player_balance !== null && data.player_balance !== undefined) {\n            playerBalance = data.player_balance;\n            updateBalanceDisplay();\n        }\n\n        if (round) {\n            currentRound = round;\n            dealingShown = false;\n\n            if (round.round_status === 'betting') {\n                enableBetting();\n                startLocalCountdown(round.timer_remaining || 0);\n            }\n\n            if (round.round_status === 'dealing' && round.player_cards && round.player_cards.length) {\n                dealingShown = true;\n                disableBetting();\n                showSharedCards({\n                    player_cards: round.player_cards,\n                    banker_cards: round.banker_cards,\n                    player_total: round.player_total,\n                    banker_total: round.banker_total,\n                });\n            }\n        }\n\n        if (data.leaderboard)     renderLeaderboard(data.leaderboard, data.active_players || {});\n        if (data.recent_activity) renderActivityFeed(data.recent_activity);\n        setPlayerCount(Object.keys(data.active_players || {}).length);\n\n    } catch (err) {\n        console.error('[Init] Failed to load game state:', err);\n        setTimerLabel('Connection error — refresh to retry');\n    }\n}\n\n// ── Betting ───────────────────────────────────────────────────────────────────\n\nasync function handleBetClick(box) {\n    if (!currentRound) return showToast('Loading...');\n\n    const status = currentRound.round_status || currentRound.status;\n    if (status !== 'waiting' && status !== 'betting') {\n        return showToast('Wait for the next round!');\n    }\n    if (selectedChip === 0) return showToast('Select a chip first!');\n\n    const betType = box.dataset.betType;\n    if (betType === 'player' && currentBets.banker > 0) return showToast('Cannot bet Player and Banker!');\n    if (betType === 'banker' && currentBets.player > 0) return showToast('Cannot bet Player and Banker!');\n\n    const projected = Object.assign({}, currentBets, { [betType]: currentBets[betType] + selectedChip });\n    const newTotal  = Object.values(projected).reduce(function (s, v) { return s + v; }, 0);\n    if (newTotal > playerBalance) return showToast('Insufficient balance!');\n\n    // Was the round waiting before this click? Used below to start the countdown.\n    const wasWaiting = status === 'waiting';\n\n    // Optimistic update\n    currentBets[betType] += selectedChip;\n    playerBalance        -= selectedChip;\n    updateBetDisplay(betType);\n    updateBalanceDisplay();\n    hasBetThisRound = true;\n\n    try {\n        const res = await window.axios.post(API_BASE + '/game/bet', {\n            round_id: currentRound.id || currentRound.round_id,\n            bets:     currentBets,\n        });\n\n        // Sync to server-authoritative balance (prevents drift across multi-chip clicks)\n        if (res.data.balance !== undefined) {\n            playerBalance = res.data.balance;\n            updateBalanceDisplay();\n        }\n\n        // If this bet just kicked off the betting phase, start the local countdown\n        // immediately — on shared hosting the queue worker may not fire for a while.\n        if (wasWaiting && res.data.round_status === 'betting') {\n            currentRound.round_status = 'betting';\n            startLocalCountdown(res.data.timer_remaining || 20);\n        }\n\n        showToast('+' + selectedChip + ' on ' + betType.toUpperCase());\n    } catch (err) {\n        // Roll back\n        currentBets[betType] -= selectedChip;\n        playerBalance        += selectedChip;\n        hasBetThisRound       = Object.values(currentBets).some(function (v) { return v > 0; });\n        updateBetDisplay(betType);\n        updateBalanceDisplay();\n        const msg = err.response && err.response.data && err.response.data.message\n            ? err.response.data.message\n            : 'Bet failed — try again';\n        showToast(msg);\n        console.error('[Bet]', err);\n    }\n}\n\nasync function clearAllBets() {\n    const status = (currentRound && (currentRound.round_status || currentRound.status));\n    if (status !== 'betting') return showToast('Cannot clear bets now!');\n\n    const total = Object.values(currentBets).reduce(function (s, v) { return s + v; }, 0);\n    if (total === 0) return;\n\n    try {\n        const res = await window.axios.post(API_BASE + '/game/clear', {\n            round_id: currentRound.id || currentRound.round_id,\n        });\n        playerBalance = res.data.balance;\n        clearBets();\n        updateBalanceDisplay();\n        showToast('Cleared! ' + total + ' WPUFF refunded');\n    } catch (err) {\n        showToast('Could not clear bets');\n    }\n}\n\n// ── Card animation ────────────────────────────────────────────────────────────\n\nfunction showSharedCards(data) {\n    const overlay = document.getElementById('card-dealing-overlay');\n    const pHand   = document.getElementById('player-hand');\n    const bHand   = document.getElementById('banker-hand');\n    if (!overlay || !pHand || !bHand) return;\n\n    overlay.classList.add('active');\n    pHand.innerHTML = '';\n    bHand.innerHTML = '';\n    var pScore = document.getElementById('player-total-score');\n    var bScore = document.getElementById('banker-total-score');\n    if (pScore) pScore.textContent = '?';\n    if (bScore) bScore.textContent = '?';\n\n    const DELAY  = 1000;\n    const pCards = data.player_cards || data.playerCards || [];\n    const bCards = data.banker_cards || data.bankerCards || [];\n\n    pCards.forEach(function (card, i) {\n        setTimeout(function () { appendCard(pHand, card); }, i * DELAY);\n    });\n    bCards.forEach(function (card, i) {\n        setTimeout(function () { appendCard(bHand, card); }, (i * DELAY) + 500);\n    });\n\n    const totalMs = Math.max(pCards.length, bCards.length) * DELAY + 800;\n    setTimeout(function () {\n        if (pScore) pScore.textContent = data.player_total != null ? data.player_total : (data.playerTotal || '?');\n        if (bScore) bScore.textContent = data.banker_total != null ? data.banker_total : (data.bankerTotal || '?');\n    }, totalMs);\n}\n\nfunction appendCard(container, card) {\n    const el       = document.createElement('div');\n    el.className   = 'card-placeholder';\n    el.textContent = card.display;\n    el.style.color = ['♥', '♦'].indexOf(card.suit) !== -1 ? '#dc3545' : '#212529';\n    container.appendChild(el);\n}\n\nfunction showResult(data) {\n    hideOverlays();\n\n    const resultEl  = document.getElementById('result-overlay');\n    const titleEl   = document.getElementById('result-title');\n    const detailsEl = document.getElementById('result-details');\n    if (!resultEl) return;\n\n    resultEl.classList.add('active');\n    if (titleEl)   titleEl.textContent = (data.result || '').replace(/_/g, ' ');\n\n    var profit = data.profit || 0;\n    if (detailsEl) {\n        detailsEl.textContent = profit > 0\n            ? 'You won +' + profit + ' WPUFF \\uD83C\\uDF89'\n            : profit < 0\n                ? 'You lost ' + Math.abs(profit) + ' WPUFF \\uD83D\\uDE22'\n                : 'Tie \\u2014 bet returned';\n    }\n\n    startCountdown('result-countdown', 5, function () {\n        resultEl.classList.remove('active');\n    });\n}\n\nfunction showNextRoundCountdown(seconds) {\n    var wrapper = document.getElementById('next-round-wrapper');\n    if (!wrapper) return;\n    wrapper.classList.remove('d-none');\n    startCountdown('next-round-seconds', seconds, function () {\n        wrapper.classList.add('d-none');\n    });\n}\n\nfunction hideOverlays() {\n    var d = document.getElementById('card-dealing-overlay');\n    var r = document.getElementById('result-overlay');\n    if (d) d.classList.remove('active');\n    if (r) r.classList.remove('active');\n}\n\n// ── UI helpers ────────────────────────────────────────────────────────────────\n\nfunction clearBets() {\n    Object.keys(currentBets).forEach(function (k) { currentBets[k] = 0; updateBetDisplay(k); });\n    document.querySelectorAll('.betting-box').forEach(function (b) { b.classList.remove('disabled'); });\n    hasBetThisRound = false;\n}\n\nfunction enableBetting()  {\n    document.querySelectorAll('.betting-box').forEach(function (b) { b.classList.remove('disabled'); });\n}\nfunction disableBetting() {\n    document.querySelectorAll('.betting-box').forEach(function (b) { b.classList.add('disabled'); });\n}\n\n// ── Local countdown ───────────────────────────────────────────────────────────\n// Drives the on-screen timer without depending on WS TimerTick events.\n// Essential on shared hosting (Hostinger) where a persistent queue worker cannot\n// run — the bet response tells us how many seconds remain and we count down here.\n// Server-sent TimerTick events simply overwrite localCountdownRemaining to stay in sync.\n\nfunction startLocalCountdown(seconds) {\n    stopLocalCountdown();\n    localCountdownRemaining = seconds;\n    updateTimerDisplay(localCountdownRemaining);\n\n    localCountdownTimer = setInterval(function () {\n        localCountdownRemaining--;\n        if (localCountdownRemaining <= 0) {\n            localCountdownRemaining = 0;\n            stopLocalCountdown();\n            setTimerLabel('Waiting for cards...');\n            return;\n        }\n        updateTimerDisplay(localCountdownRemaining);\n    }, 1000);\n}\n\nfunction stopLocalCountdown() {\n    clearInterval(localCountdownTimer);\n    localCountdownTimer     = null;\n    localCountdownRemaining = 0;\n}\n\nfunction updateTimerDisplay(seconds) {\n    var el = document.getElementById('bet-timer');\n    if (!el) return;\n    el.innerHTML = '<i class=\"bi bi-clock-fill\"></i> Time: <span class=\"fw-bold\">' + seconds + '</span>s';\n    el.classList.remove('text-success', 'text-warning', 'text-danger');\n    if (seconds <= 5)       el.classList.add('text-danger');\n    else if (seconds <= 10) el.classList.add('text-warning');\n    else                    el.classList.add('text-success');\n}\n\nfunction setTimerLabel(text) {\n    var el = document.getElementById('bet-timer');\n    if (el) el.innerHTML = '<i class=\"bi bi-clock-fill\"></i> ' + text;\n}\n\nvar BET_DISPLAY_MAP = {\n    player:     'player-total',\n    banker:     'banker-total',\n    tie:        'tie-total',\n    playerPair: 'player-pair-total',\n    bankerPair: 'banker-pair-total',\n    randomPair: 'random-pair-total',\n};\n\nfunction updateBetDisplay(betType) {\n    var el = document.getElementById(BET_DISPLAY_MAP[betType]);\n    if (el) el.textContent = currentBets[betType];\n}\n\nfunction updateBalanceDisplay() {\n    ['player-balance', 'player-balance-side'].forEach(function (id) {\n        var el = document.getElementById(id);\n        if (el) el.textContent = Number(playerBalance).toLocaleString();\n    });\n    // Keep localStorage in sync so the correct balance is shown on next page load.\n    localStorage.setItem('player_balance', playerBalance);\n}\n\nfunction setPlayerCount(n) {\n    var el = document.getElementById('player-count');\n    if (el) el.textContent = n;\n}\n\nfunction renderLeaderboard(leaders, activePlayers) {\n    var el = document.getElementById('leaderboard');\n    if (!el) return;\n    var activeIds = Object.keys(activePlayers || {}).map(Number);\n    el.innerHTML = leaders.map(function (p, i) {\n        var isMe     = p.id === playerId;\n        var isActive = activeIds.indexOf(p.id) !== -1;\n        return '<div class=\"d-flex justify-content-between align-items-center py-1 border-bottom border-secondary small\">'\n            + '<span class=\"text-warning fw-bold\">#' + (i + 1) + '</span>'\n            + '<span class=\"' + (isMe ? 'text-warning fw-bold' : 'text-white') + '\">'\n            + escHtml(p.player_name) + (isActive ? ' \\uD83D\\uDFE2' : '')\n            + '</span>'\n            + '<span class=\"text-success fw-bold\">' + Number(p.balance).toLocaleString() + '</span>'\n            + '</div>';\n    }).join('');\n}\n\nfunction renderActivityFeed(items) {\n    var el = document.getElementById('activity-feed');\n    if (!el) return;\n    el.innerHTML = items.slice(0, 5).map(function (a) {\n        return '<div class=\"activity-item small py-1\">\\uD83C\\uDFB2 ' + escHtml(a.message) + '</div>';\n    }).join('');\n}\n\nfunction addActivityItem(message) {\n    var el = document.getElementById('activity-feed');\n    if (!el) return;\n    var item     = document.createElement('div');\n    item.className   = 'activity-item small py-1';\n    item.textContent = message;\n    el.prepend(item);\n    while (el.children.length > 5) el.lastChild.remove();\n}\n\nfunction showToast(msg) {\n    var container = document.getElementById('toast-container');\n    if (!container) return;\n    var el     = document.createElement('div');\n    el.className   = 'toast-msg alert alert-dark py-1 px-3 mb-1 small';\n    el.textContent = msg;\n    container.appendChild(el);\n    setTimeout(function () { el.remove(); }, 3000);\n}\n\nfunction startCountdown(elementId, seconds, onDone) {\n    var count = seconds;\n    var el    = document.getElementById(elementId);\n    var tick  = function () {\n        if (el) el.textContent = count + 's';\n        if (count-- <= 0) { if (onDone) onDone(); }\n        else setTimeout(tick, 1000);\n    };\n    tick();\n}\n\nfunction escHtml(str) {\n    return String(str || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n// ── Expose for Blade onclick= attributes ─────────────────────────────────────\n\nwindow.handleBetClick = handleBetClick;\nwindow.clearAllBets   = clearAllBets;\nwindow.selectChip     = function (amount) {\n    selectedChip = amount;\n    document.querySelectorAll('.chip').forEach(function (c) {\n        c.classList.toggle('active', parseInt(c.dataset.value) === amount);\n    });\n};\n"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","playerId","playerBalance","currentRound","currentBets","player","banker","tie","playerPair","bankerPair","randomPair","selectedChip","hasBetThisRound","dealingShown","localCountdownTimer","localCountdownRemaining","API_BASE","boot","console","log","window","Echo","channel","listen","data","myId","id","round_id","isNewRound","stopLocalCountdown","clearBets","hideOverlays","status","enableBetting","startLocalCountdown","timer_seconds","setTimerLabel","seconds_remaining","updateTimerDisplay","message","el","document","getElementById","item","createElement","className","textContent","prepend","children","lastChild","remove","addActivityItem","player_name","total_bet","setPlayerCount","active_players","assign","disableBetting","showSharedCards","pLen","player_cards","playerCards","bLen","banker_cards","bankerCards","waitMs","Math","max","setTimeout","seconds","wrapper","next_round_in","classList","startCountdown","add","new_balance","updateBalanceDisplay","animMs","resultEl","titleEl","detailsEl","result","replace","profit","abs","showResult","subscribeToPlayerChannel","_fetchInitialState","fetchInitialState","_callee","res","round","_t","_context","axios","get","current_round","player_balance","undefined","round_status","timer_remaining","player_total","banker_total","leaderboard","renderLeaderboard","recent_activity","renderActivityFeed","keys","error","_handleBetClick","_callee2","box","betType","projected","wasWaiting","_t2","_context2","showToast","dataset","_defineProperty","values","reduce","s","updateBetDisplay","post","bets","balance","toUpperCase","some","response","_clearAllBets","_callee3","total","_context3","overlay","pHand","bHand","innerHTML","pScore","bScore","DELAY","pCards","bCards","forEach","card","appendCard","totalMs","playerTotal","bankerTotal","container","display","style","color","indexOf","suit","appendChild","k","querySelectorAll","b","setInterval","clearInterval","text","addEventListener","app","parseInt","playerName","readPlayerData","echoReady","once","attempts","poll","removeEventListener","BET_DISPLAY_MAP","Number","toLocaleString","localStorage","setItem","leaders","activePlayers","activeIds","map","isMe","isActive","escHtml","join","items","slice","msg","elementId","onDone","count","tick","str","String","handleBetClick","_x","clearAllBets","selectChip","amount","toggle"],"sourceRoot":""}